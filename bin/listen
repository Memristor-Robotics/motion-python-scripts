#!/usr/bin/python3
import binascii

import os,sys
sys.path.append(os.path.join(os.path.dirname(os.path.realpath(__file__)), os.pardir, 'python'))
from Engine import *
e=Engine()


def P_cmd(p):
	# print(len(p), p)
	print(p[0] + " (" + str(l16(p, 1)) + ", " + str(l16(p, 3)) + ")  angle: " + str(l16(p, 5))) 

def do_nothing(p):
	pass

packets = {
	'P': P_cmd,
	'p': P_cmd,
	'F': do_nothing,
	'A': do_nothing
}
while True:
	p = e.read()
	if chr(p[0]) in packets:
		packets[chr(p[0])](p[1])
	else:
		print(chr(p[0]), binascii.hexlify(p[1]))
